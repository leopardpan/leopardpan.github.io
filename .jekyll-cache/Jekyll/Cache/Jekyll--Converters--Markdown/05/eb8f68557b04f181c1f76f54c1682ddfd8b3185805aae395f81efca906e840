I"€9<h2 id="bddæ¥å£æµ‹è¯•æ˜¯ä»€ä¹ˆ">BDDæ¥å£æµ‹è¯•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>

<p>BDD (Behavior Driven Development) æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œæ—¨åœ¨é€šè¿‡å®šä¹‰å’Œæ‰§è¡Œè¡Œä¸ºæ¥å¢å¼ºè½¯ä»¶çš„å¯ç†è§£æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚åœ¨æ¥å£æµ‹è¯•ä¸­ï¼ŒBDD å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æè¿°æ¥å£çš„è¡Œä¸ºå’ŒæœŸæœ›ç»“æœï¼Œä»è€Œæé«˜æµ‹è¯•ç”¨ä¾‹çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>

<p>Pytest-BDD æ˜¯ä¸€ä¸ª Pytest æ’ä»¶ï¼Œå®ƒæä¾›äº†å¯¹ BDD æµ‹è¯•çš„æ”¯æŒã€‚ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨ Pytest-BDD è¿›è¡Œæ¥å£æµ‹è¯•çš„æ­¥éª¤ï¼š</p>

<ol>
  <li>å®‰è£… Pytest-BDD</li>
</ol>

<p>å¯ä»¥ä½¿ç”¨ pip å‘½ä»¤å®‰è£… Pytest-BDDï¼š</p>

<pre><code>pip install pytest-bdd
</code></pre>

<ol>
  <li>å®šä¹‰ Feature æ–‡ä»¶</li>
</ol>

<p>åœ¨ BDD ä¸­ï¼Œæµ‹è¯•ç”¨ä¾‹é€šå¸¸ä»¥ Feature æ–‡ä»¶çš„å½¢å¼è¿›è¡Œç»„ç»‡ã€‚Feature æ–‡ä»¶æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç”¨äºæè¿°æµ‹è¯•ç”¨ä¾‹çš„åœºæ™¯å’ŒæœŸæœ›ç»“æœã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ Feature æ–‡ä»¶ï¼š</p>

<pre><code class="language-gherkin">Feature: User API

Scenario: Create a new user
    Given I have a valid access token
    When I make a POST request to "/users" with the following data
        | username | john_doe |
        | email    | john_doe@example.com |
        | password | 123456 |
    Then the response status code should be 201
    And the response should contain the following data
        | username | john_doe |
        | email    | john_doe@example.com |
</code></pre>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒFeature æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º â€œUser APIâ€ çš„ Featureï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªåä¸º â€œCreate a new userâ€ çš„ Scenarioã€‚Scenario ä¸­æè¿°äº†æµ‹è¯•ç”¨ä¾‹çš„åœºæ™¯å’ŒæœŸæœ›ç»“æœï¼ŒåŒ…æ‹¬ç»™å®šçš„å‰ææ¡ä»¶ (Given)ã€æ“ä½œ (When) å’Œæ–­è¨€ (Then)ã€‚</p>

<ol>
  <li>å®šä¹‰ Step Definitions</li>
</ol>

<p>Step Definitions æ˜¯ä¸€ä¸ª <a href="">Python</a> æ¨¡å—ï¼Œç”¨äºå®ç° Feature æ–‡ä»¶ä¸­å®šä¹‰çš„ Givenã€When å’Œ Then æ­¥éª¤ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ Step Definitionsï¼š</p>

<pre><code class="language-python">import requests
from pytest_bdd import given, when, then, parsers

@given("I have a valid access token")
def valid_access_token():
    # è¿”å›ä¸€ä¸ªæœ‰æ•ˆçš„è®¿é—®ä»¤ç‰Œ
    return "valid_token"

@when(parsers.parse('I make a {method} request to "{url}" with the following data'))
def make_request(method, url):
    # æ ¹æ®æ–¹æ³•å’Œ URL å‘é€è¯·æ±‚
    # å°†æ•°æ®ä½œä¸ºè¯·æ±‚æ­£æ–‡å‘é€
    response = requests.request(method, url, json=parsers.parse_table())
    return response

@then(parsers.parse('the response status code should be {status_code:d}'))
def check_status_code(make_request, status_code):
    assert make_request.status_code == status_code

@then(parsers.parse('the response should contain the following data'))
def check_response_data(make_request):
    expected_data = parsers.parse_table()
    actual_data = make_request.json()
    assert expected_data in actual_data.values()
</code></pre>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒStep Definitions å®ç°äº† Feature æ–‡ä»¶ä¸­å®šä¹‰çš„ Givenã€When å’Œ Then æ­¥éª¤ã€‚<a href="">Step Definitions</a> ä½¿ç”¨ Pytest-BDD æä¾›çš„è£…é¥°å™¨ (å¦‚ @givenã€@when å’Œ @then) æ¥æ ‡è®°æ­¥éª¤ï¼Œä»¥åŠ Pytest-BDD æä¾›çš„ parsers.parse æ–¹æ³•æ¥è§£æè¡¨æ ¼æ•°æ®ã€‚</p>

<ol>
  <li>è¿è¡Œæµ‹è¯•ç”¨ä¾‹</li>
</ol>

<p>ä½¿ç”¨ Pytest è¿è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>--bdd</code> å‚æ•°æ¥æŒ‡å®šæµ‹è¯•ç›®å½•å’Œæ¨¡å¼ï¼Œå¦‚ï¼š</p>

<pre><code>pytest --bdd tests/ --verbose
</code></pre>

<p>åœ¨è¿è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶ï¼ŒPytest-BDD å°†è‡ªåŠ¨æ‰«ææµ‹è¯•ç›®å½•ä¸‹çš„ Feature æ–‡ä»¶å’Œ Step Definitionsï¼Œç„¶åæ ¹æ® Feature æ–‡ä»¶å®šä¹‰çš„åœºæ™¯æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ã€‚</p>

<p>æ€»ä¹‹ï¼Œä½¿ç”¨ Pytest-BDD è¿›è¡Œæ¥å£æµ‹è¯•å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æè¿°æ¥å£çš„è¡Œä¸ºå’ŒæœŸæœ›ç»“æœï¼Œä»è€Œæé«˜æµ‹è¯•ç”¨ä¾‹çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å»ºè®®äº†è§£ Pytest-BDD å®˜æ–¹æ–‡æ¡£ä¸­æœ‰å…³ BDD æµ‹è¯•çš„æ›´å¤šå†…å®¹ï¼Œä»¥ä¾¿æ›´å¥½åœ°ä½¿ç”¨ Pytest-BDD è¿›è¡Œæ¥å£æµ‹è¯•ã€‚</p>

<h2 id="å®šä¹‰-feature-æ–‡ä»¶çš„æ ¼å¼å¯ä»¥å±•å¼€è¯´æ˜ä¸€ä¸‹å—">å®šä¹‰ Feature æ–‡ä»¶çš„æ ¼å¼å¯ä»¥å±•å¼€è¯´æ˜ä¸€ä¸‹å—</h2>

<p>Feature æ–‡ä»¶æ˜¯ BDD æµ‹è¯•ä¸­ç”¨äºæè¿°æµ‹è¯•ç”¨ä¾‹çš„åœºæ™¯å’ŒæœŸæœ›ç»“æœçš„æ–‡æœ¬æ–‡ä»¶ã€‚å®ƒé€šå¸¸é‡‡ç”¨ Gherkin è¯­è¨€è¿›è¡Œç¼–å†™ï¼ŒGherkin è¯­è¨€æ˜¯ä¸€ç§åŸºäºè‡ªç„¶è¯­è¨€çš„ <a href="">DSL</a> (Domain Specific Language)ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€å•æ˜“æ‡‚çš„è¯­æ³•ï¼Œç”¨äºæè¿°æµ‹è¯•ç”¨ä¾‹çš„åœºæ™¯å’ŒæœŸæœ›ç»“æœã€‚</p>

<p>ä¸‹é¢æ˜¯ä¸€ä¸ª Feature æ–‡ä»¶çš„ç¤ºä¾‹ï¼Œå®ƒæè¿°äº†ä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„æµ‹è¯•ç”¨ä¾‹åœºæ™¯ï¼š</p>

<pre><code class="language-gherkin">Feature: User Management
    As a system administrator
    I want to manage users
    So that I can manage access to the system

    Scenario: Create a new user
        Given I am logged in as an administrator
        When I create a new user with the following details
            | username | john_doe |
            | email    | john_doe@example.com |
            | password | 123456 |
        Then the user should be created successfully

    Scenario: Update an existing user
        Given I am logged in as an administrator
        And there is an existing user with the username "jane_doe"
        When I update the user with the username "jane_doe" with the following details
            | email    | jane_doe@example.com |
            | password | 654321 |
        Then the user should be updated successfully

    Scenario: Delete an existing user
        Given I am logged in as an administrator
        And there is an existing user with the username "jane_doe"
        When I delete the user with the username "jane_doe"
        Then the user should be deleted successfully
</code></pre>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒFeature æ–‡ä»¶åŒ…å«äº†ä¸€ä¸ªåä¸º â€œUser Managementâ€ çš„ Featureï¼Œå®ƒæè¿°äº†ä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„æµ‹è¯•ç”¨ä¾‹åœºæ™¯ã€‚Feature æ–‡ä»¶ä¸­çš„æ¯ä¸ª Scenario æè¿°äº†ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å‰ææ¡ä»¶ (Given)ã€æ“ä½œ (When) å’Œæ–­è¨€ (Then)ã€‚</p>

<p>Feature æ–‡ä»¶çš„åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>

<pre><code>Feature: &lt;feature name&gt;
    &lt;feature description&gt;

    Scenario: &lt;scenario name&gt;
        Given &lt;precondition&gt;
        When &lt;action&gt;
        Then &lt;assertion&gt;

    Scenario: &lt;scenario name&gt;
        Given &lt;precondition&gt;
        When &lt;action&gt;
        Then &lt;assertion&gt;

    ...
</code></pre>

<p>å…¶ä¸­ï¼ŒFeatureã€Scenarioã€Givenã€When å’Œ Then ç­‰å…³é”®å­—éƒ½æ˜¯ Gherkin è¯­è¨€ä¸­çš„ä¿ç•™å…³é”®å­—ï¼Œç”¨äºæè¿°æµ‹è¯•ç”¨ä¾‹çš„åœºæ™¯å’ŒæœŸæœ›ç»“æœã€‚Feature æ–‡ä»¶çš„è¯¦ç»†æ ¼å¼å’Œè¯­æ³•å¯ä»¥å‚è€ƒ Gherkin è¯­è¨€çš„å®˜æ–¹æ–‡æ¡£å’Œ Pytest-BDD çš„å®˜æ–¹æ–‡æ¡£ã€‚</p>

<h2 id="step-definitionsä¸­çš„whenparsersparsei-make-a-request-to--with-the-following-dataæˆ‘çœ‹ä¸å¤ªæ‡‚">Step Definitionsä¸­çš„@when(parsers.parse(â€˜I make a request to â€œâ€ with the following dataâ€™))æˆ‘çœ‹ä¸å¤ªæ‡‚</h2>

<p>è¿™æ®µ Step Definitions ä¸­çš„ <code>@when(parsers.parse('I make a request to "{url}" with the following data'))</code> æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œç”¨äºæ ‡è®°ä¸€ä¸ª When æ­¥éª¤ã€‚è¯¥æ­¥éª¤å¯¹åº” Feature æ–‡ä»¶ä¸­çš„ä¸€è¡Œï¼Œä¾‹å¦‚ï¼š</p>

<pre><code class="language-gherkin">When I make a request to "https://example.com/api/users" with the following data
</code></pre>

<p>è£…é¥°å™¨çš„å‚æ•° <code>parsers.parse('I make a request to "{url}" with the following data')</code> è¡¨ç¤ºä½¿ç”¨ <code>parsers.parse()</code> æ–¹æ³•æ¥è§£æ Feature æ–‡ä»¶ä¸­çš„æ–‡æœ¬ï¼Œå¹¶å°†å…¶ä¸­çš„ <code>{url}</code> å‚æ•°è§£æä¸º Step Definitions å‡½æ•°çš„ <code>url</code> å‚æ•°ã€‚</p>

<p>å½“ Pytest-BDD æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œå®ƒä¼šå°† Feature æ–‡ä»¶ä¸­çš„æ–‡æœ¬ä¼ é€’ç»™ Step Definitions å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>

<pre><code class="language-python">@when(parsers.parse('I make a request to "{url}" with the following data'))
def make_request(url):
    # æ‰§è¡Œ HTTP è¯·æ±‚ï¼Œä½¿ç”¨ url å’Œæ•°æ®è¡¨æ ¼ä¸­çš„æ•°æ®
    pass
</code></pre>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>make_request()</code> å‡½æ•°æ¥å—ä¸€ä¸ª <code>url</code> å‚æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨è¯¥å‚æ•°å’Œæ•°æ®è¡¨æ ¼ä¸­çš„æ•°æ®æ¥æ‰§è¡Œ HTTP è¯·æ±‚ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ Feature æ–‡ä»¶ä¸­çš„æ–‡æœ¬æ˜¯ <code>When I make a request to "https://example.com/api/users" with the following data</code>ï¼Œåˆ™ Pytest-BDD ä¼šå°† <code>https://example.com/api/users</code> ä½œä¸º <code>url</code> å‚æ•°ä¼ é€’ç»™ <code>make_request()</code> å‡½æ•°ï¼Œå¹¶ä¸”å°†æ•°æ®è¡¨æ ¼ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ é€’ã€‚</p>

<p>å¸Œæœ›è¿™æ ·çš„è§£é‡Šèƒ½å¤Ÿå¸®åŠ©æ‚¨ç†è§£ Step Definitions ä¸­çš„è£…é¥°å™¨å’Œå‚æ•°ã€‚</p>

<h2 id="æˆ‘çœ‹ä¸å¤ªæ‡‚thenparsersparsethe-response-status-code-should-be-def-check_status_codemake_request-status_code-assert-make_requeststatus_code--status_code">æˆ‘çœ‹ä¸å¤ªæ‡‚@then(parsers.parse(â€˜the response status code should beâ€™)) def check_status_code(make_request, status_code): assert make_request.status_code == status_code</h2>

<p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ª <a href="">Step Definitions</a> ä¸­çš„ <code>@then</code> è£…é¥°å™¨ï¼Œç”¨äºæ ‡è®°ä¸€ä¸ª Then æ­¥éª¤ã€‚è¯¥æ­¥éª¤å¯¹åº”äº Feature æ–‡ä»¶ä¸­çš„ä¸€è¡Œï¼Œä¾‹å¦‚ï¼š</p>

<pre><code class="language-gherkin">Then the response status code should be 200
</code></pre>

<p>è£…é¥°å™¨çš„å‚æ•° <code>parsers.parse('the response status code should be {status_code:d}')</code> è¡¨ç¤ºä½¿ç”¨ <code>parsers.parse()</code> æ–¹æ³•æ¥è§£æ Feature æ–‡ä»¶ä¸­çš„æ–‡æœ¬ï¼Œå¹¶å°†å…¶ä¸­çš„ <code>{status_code}</code> å‚æ•°è§£æä¸º Step Definitions å‡½æ•°çš„ <code>status_code</code> å‚æ•°ã€‚<code>d</code> è¡¨ç¤ºå°†è¯¥å‚æ•°è§£æä¸ºæ•´æ•°ç±»å‹ã€‚</p>

<p>å½“ Pytest-BDD æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œå®ƒä¼šå°† Feature æ–‡ä»¶ä¸­çš„æ–‡æœ¬ä¼ é€’ç»™ Step Definitions å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>

<pre><code class="language-python">@then(parsers.parse('the response status code should be {status_code:d}'))
def check_status_code(make_request, status_code):
    assert make_request.status_code == status_code
</code></pre>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>check_status_code()</code> å‡½æ•°æ¥å—ä¸€ä¸ª <code>make_request</code> å‚æ•°å’Œä¸€ä¸ª <code>status_code</code> å‚æ•°ã€‚<code>make_request</code> å‚æ•°æ˜¯ä¸€ä¸ªåœ¨ä¹‹å‰çš„ Given æˆ– When æ­¥éª¤ä¸­æ‰§è¡Œçš„è¯·æ±‚å¯¹è±¡ï¼ˆä¾‹å¦‚ä½¿ç”¨ requests åº“å‘å‡ºçš„ HTTP è¯·æ±‚ï¼‰ï¼Œè€Œ <code>status_code</code> å‚æ•°åˆ™æ˜¯ä» Feature æ–‡ä»¶ä¸­è§£æå‡ºæ¥çš„ HTTP çŠ¶æ€ç ã€‚</p>

<p>è¯¥å‡½æ•°çš„å®ç°æ˜¯æ£€æŸ¥ <code>make_request</code> å¯¹è±¡çš„çŠ¶æ€ç æ˜¯å¦ç­‰äº <code>status_code</code> å‚æ•°ã€‚å¦‚æœçŠ¶æ€ç ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆè¯¥æ–­è¨€ä¼šå¤±è´¥ï¼Œä»è€Œæ ‡è®°è¯¥æµ‹è¯•ç”¨ä¾‹ä¸ºå¤±è´¥ã€‚</p>

<p>å¸Œæœ›è¿™æ ·çš„è§£é‡Šèƒ½å¤Ÿå¸®åŠ©æ‚¨ç†è§£ Step Definitions ä¸­çš„è£…é¥°å™¨å’Œå‚æ•°ï¼Œå¹¶ç†è§£å…¶åœ¨ Pytest-BDD ä¸­çš„ä½œç”¨ã€‚</p>

<h2 id="bddæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ€ä¹ˆç®¡ç†å¾ˆå¤šçš„æµ‹è¯•æ•°æ®å‘¢">BDDæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ€ä¹ˆç®¡ç†å¾ˆå¤šçš„æµ‹è¯•æ•°æ®å‘¢</h2>

<p>åœ¨ BDD æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­ï¼Œç®¡ç†å¤§é‡æµ‹è¯•æ•°æ®çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œå…·ä½“æ ¹æ®é¡¹ç›®çš„å®é™…æƒ…å†µå’Œéœ€æ±‚æ¥é€‰æ‹©ã€‚</p>

<p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ç®¡ç†æµ‹è¯•æ•°æ®çš„æ–¹æ³•ï¼š</p>

<ol>
  <li>æ•°æ®åº“ç®¡ç†ï¼šå°†æµ‹è¯•æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶ä½¿ç”¨ SQL è¯­å¥æ¥è·å–å’Œæ“ä½œæ•°æ®ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œæ•°æ®çš„å¢åˆ æ”¹æŸ¥å’Œç®¡ç†ï¼Œä½†éœ€è¦ä¸€äº›æ•°æ®åº“çŸ¥è¯†å’Œç»´æŠ¤æˆæœ¬ã€‚</li>
  <li>Excel/CSV æ–‡ä»¶ç®¡ç†ï¼šå°†æµ‹è¯•æ•°æ®å­˜å‚¨åœ¨ <a href="">Excel</a> æˆ– <a href="">CSV</a> æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ <a href="">Python</a> çš„ pandas åº“æˆ–å…¶ä»–æ•°æ®å¤„ç†åº“æ¥è¯»å–å’Œæ“ä½œæ•°æ®ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œæ•°æ®çš„å¯¼å…¥å¯¼å‡ºå’Œç®¡ç†ï¼Œä½†éœ€è¦ä¸€äº›é¢å¤–çš„å¼€å‘å·¥ä½œã€‚</li>
  <li>é…ç½®æ–‡ä»¶ç®¡ç†ï¼šå°†æµ‹è¯•æ•°æ®å­˜å‚¨åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ <a href="">YAML</a> æˆ– <a href="">JSON</a> æ ¼å¼çš„æ–‡ä»¶ï¼Œä½¿ç”¨ Python çš„ <a href="">ConfigParser</a> æˆ–å…¶ä»–é…ç½®æ–‡ä»¶è§£æåº“æ¥è¯»å–å’Œæ“ä½œæ•°æ®ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œæ•°æ®çš„é…ç½®å’Œç®¡ç†ï¼Œä½†éœ€è¦ä¸€äº›é¢å¤–çš„å¼€å‘å·¥ä½œã€‚</li>
  <li>æ•°æ®ç”Ÿæˆå·¥å…·ï¼šä½¿ç”¨ Python çš„ Faker åº“æˆ–å…¶ä»–æ•°æ®ç”Ÿæˆåº“æ¥ç”Ÿæˆæµ‹è¯•æ•°æ®ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æ–¹ä¾¿åœ°ç”Ÿæˆå¤§é‡çš„æµ‹è¯•æ•°æ®ï¼Œä½†éœ€è¦ç¡®ä¿ç”Ÿæˆçš„æ•°æ®ç¬¦åˆä¸šåŠ¡é€»è¾‘å’Œè¦æ±‚ã€‚</li>
</ol>

<p>æ— è®ºé‡‡ç”¨å“ªç§æ–¹æ³•ï¼Œéƒ½éœ€è¦æ³¨æ„æµ‹è¯•æ•°æ®çš„å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ï¼Œä»¥ä¾¿åœ¨æµ‹è¯•ç”¨ä¾‹å˜æ›´æˆ–æ–°å¢æ—¶èƒ½å¤Ÿå¿«é€Ÿåœ°ä¿®æ”¹æˆ–æ·»åŠ æµ‹è¯•æ•°æ®ã€‚åŒæ—¶ï¼Œä¹Ÿéœ€è¦å¯¹æµ‹è¯•æ•°æ®è¿›è¡Œåˆç†çš„ç»„ç»‡å’Œåˆ†ç±»ï¼Œä»¥ä¾¿äºæµ‹è¯•ç”¨ä¾‹çš„ç®¡ç†å’Œç»´æŠ¤ã€‚</p>

<h2 id="å¯ä»¥æ›´åŠ å…·ä½“è¯´ä¸€ä¸‹è¿™ä¸ªæ­¥éª¤å—è¿˜æ˜¯ä¸æ‡‚æ€ä¹ˆå†™å…¥å¤§æ•°æ®åˆ°featureä¸­">å¯ä»¥æ›´åŠ å…·ä½“è¯´ä¸€ä¸‹è¿™ä¸ªæ­¥éª¤å—ï¼Œè¿˜æ˜¯ä¸æ‡‚æ€ä¹ˆå†™å…¥å¤§æ•°æ®åˆ°featureä¸­</h2>

<p>å¦‚æœæ‚¨éœ€è¦åœ¨ Feature æ–‡ä»¶ä¸­å†™å…¥å¤§é‡çš„æµ‹è¯•æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®è¡¨æ ¼æ¥ç»„ç»‡æ•°æ®ï¼Œå¹¶å°†æ•°æ®è¡¨æ ¼å†™å…¥ Feature æ–‡ä»¶ä¸­ã€‚æ•°æ®è¡¨æ ¼æ˜¯ Feature æ–‡ä»¶ä¸­ä»¥è¡¨æ ¼æ ¼å¼è¡¨ç¤ºçš„æ•°æ®ï¼Œå¯ä»¥åŒ…å«å¤šè¡Œå’Œå¤šåˆ—çš„æ•°æ®ã€‚</p>

<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ Feature æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæ•°æ®è¡¨æ ¼ï¼š</p>

<pre><code class="language-gherkin">Feature: è®¢å•ç®¡ç†

  Scenario: åˆ›å»ºè®¢å•
    Given ç”¨æˆ·ç™»å½•ç³»ç»Ÿ
    When ç”¨æˆ·åˆ›å»ºè®¢å•
      | å•†å“åç§° | æ•°é‡ |
      | å•†å“A    | 2    |
      | å•†å“B    | 1    |
    Then è®¢å•åˆ›å»ºæˆåŠŸ
</code></pre>

<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ•°æ®è¡¨æ ¼ä½äº <code>When</code> æ­¥éª¤ä¸‹é¢ï¼Œä½¿ç”¨ç®¡é“ç¬¦ <code>|</code> æ¥åˆ†éš”æ¯ä¸€åˆ—çš„æ•°æ®ã€‚ç¬¬ä¸€è¡Œè¡¨ç¤ºæ¯ä¸€åˆ—çš„åˆ—åï¼Œåé¢çš„è¡Œè¡¨ç¤ºå®é™…çš„æ•°æ®ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æˆ–åˆ é™¤åˆ—å’Œè¡Œï¼Œä»¥é€‚åº”ä¸åŒçš„æµ‹è¯•åœºæ™¯ã€‚</p>

<p><a href="">åœ¨ Step Definitions</a> ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Pytest-BDD æä¾›çš„ <code>parsers.parse_table()</code> æ–¹æ³•æ¥è§£ææ•°æ®è¡¨æ ¼ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º Python ä¸­çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚åˆ—è¡¨æˆ–å­—å…¸ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ <a href="">Step Definitions</a>ï¼š</p>

<pre><code class="language-python">@when(parsers.parse('ç”¨æˆ·åˆ›å»ºè®¢å•'))
def create_order():
    pass

@when(parsers.parse('ç”¨æˆ·åˆ›å»ºè®¢å•'))
def create_order(make_request, data):
    for row in data:
        product_name = row['å•†å“åç§°']
        quantity = row['æ•°é‡']
        # ä½¿ç”¨å•†å“åç§°å’Œæ•°é‡åˆ›å»ºè®¢å•é¡¹
        pass
</code></pre>

<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>create_order()</code> å‡½æ•°æ¥å—ä¸€ä¸ª <code>make_request</code> å‚æ•°å’Œä¸€ä¸ª <code>data</code> å‚æ•°ï¼Œå…¶ä¸­ <code>data</code> å‚æ•°æ˜¯é€šè¿‡ <code>parsers.parse_table()</code> æ–¹æ³•è§£æå‡ºæ¥çš„æ•°æ®è¡¨æ ¼ã€‚åœ¨å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥éå†æ•°æ®è¡¨æ ¼çš„æ¯ä¸€è¡Œï¼Œå¹¶ä½¿ç”¨å…¶ä¸­çš„æ•°æ®æ¥æ‰§è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œä¾‹å¦‚åˆ›å»ºè®¢å•é¡¹ã€‚</p>

<p>é€šè¿‡ä½¿ç”¨æ•°æ®è¡¨æ ¼å’Œ <code>parsers.parse_table()</code> æ–¹æ³•ï¼Œæ‚¨å¯ä»¥æ–¹ä¾¿åœ°å°†å¤§é‡æµ‹è¯•æ•°æ®å†™å…¥ Feature æ–‡ä»¶å’Œ Step Definitions ä¸­ï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾åœ°æ‰©å±•å’Œç»´æŠ¤è¿™äº›æ•°æ®ã€‚</p>
:ET